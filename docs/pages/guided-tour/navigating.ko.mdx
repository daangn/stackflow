import Callout from "nextra-theme-docs/callout";

# νƒμƒ‰ν•κΈ°

μ„±κ³µμ μΌλ΅ μ•΅ν‹°λΉ„ν‹°λ¥Ό λ“±λ΅ν–λ‹¤λ©΄, μ΄μ  μ•΅ν‹°λΉ„ν‹° μ‚¬μ΄λ¥Ό μ΄λ™ν•΄λ³Ό μ°¨λ΅€μ—μ”. **Stackflow**μ—μ„λ” `useFlow()`λ¥Ό ν†µν•΄ μ•΅ν‹°λΉ„ν‹°λ¥Ό μ“κ±°λ‚, κµμ²΄ν•κ±°λ‚, μ‚­μ ν•  μ μλ„λ΅ μ§€μ›ν•κ³  μμ–΄μ”. ν•λ² μ•μ•„λ³ΌκΉμ”?

## μƒ μ•΅ν‹°λΉ„ν‹° μ“κΈ°

`stackflow.ts`μ—μ„ μƒμ„±ν–λ `useFlow()` ν›…μ„ μ‚¬μ©ν•΄μ”. ν•΄λ‹Ή ν›… λ‚΄μ— `push()` ν•¨μλ¥Ό ν†µν•΄ λ‹¤μκ³Ό κ°™μ΄ μƒ μ•΅ν‹°λΉ„ν‹°λ¥Ό μ“μ„ μ μμ–΄μ”.

```tsx
/**
 * MyActivity.tsx
 */
import { ActivityComponentType } from "@stackflow/react";
import { useFlow } from "./stackflow";

const MyActivity: ActivityComponentType = () => {
  const { push } = useFlow();

  const onClick = () => {
    push("Article", {
      title: "Hello, World!",
    });
  };

  return (
    <div>
      My Activity
      <button onClick={onClick}>Go to article page</button>
    </div>
  );
};

export default MyActivity;
```

`push()`λ” μ²«λ²μ§Έ νλΌλ―Έν„°λ΅ μ΄λ™ν•  μ•΅ν‹°λΉ„ν‹°μ μ΄λ¦„, λ‘λ²μ§Έ νλΌλ―Έν„°λ΅ μ΄λ™ν•  μ•΅ν‹°λΉ„ν‹°μ νλΌλ―Έν„°, μ„Έλ²μ§Έ νλΌλ―Έν„°λ΅ μ¶”κ°€ μµμ…μ„ λ°›μ•„μ”. μ„Έλ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ€ μ„ νƒμ μΌλ΅ λ„κΈ°μ§€ μ•μ„ μ μμ–΄μ”. (κΈ°λ³Έκ°’μ„ μ‚¬μ©ν•΄μ”)

```typescript
push("μ•΅ν‹°λΉ„ν‹°_μ΄λ¦„", {
  /* μ•΅ν‹°λΉ„ν‹° νλΌλ―Έν„° */
});

// λλ”
push(
  "μ•΅ν‹°λΉ„ν‹°_μ΄λ¦„",
  {
    /* μ•΅ν‹°λΉ„ν‹° νλΌλ―Έν„° */
  },
  {
    /* μ¶”κ°€ μµμ… */
  },
);
```

`push()` ν•¨μμ μ„Έλ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ—λ” λ‹¤μκ³Ό κ°™μ€ κ°’μ΄ μμ–΄μ”.

| μµμ…λ…    | μ—­ν•                      | νƒ€μ…    | κΈ°λ³Έκ°’ |
| --------- | ------------------------ | ------- | ------ |
| `animate` | μ• λ‹λ©”μ΄μ…μ„ μΌκ±°λ‚ κΊΌμ” | Boolean | `true` |

<Callout emoji="π’΅">
  TypeScriptλ¥Ό ν™μ©ν•λ©΄, μ•΅ν‹°λΉ„ν‹° μ΄λ¦„κ³Ό μ•΅ν‹°λΉ„ν‹° νλΌλ―Έν„°κ°€ μ—„κ²©ν•κ² νƒ€μ΄ν•‘
  λμ–΄μλ” λ¨μµμ„ ν™•μΈν•μ‹¤ μ μμ–΄μ”. TypeScriptλ¥Ό ν†µν•΄ μ•μ „ν•λ©΄μ„ νΈλ¦¬ν•κ²
  **Stackflow**λ¥Ό ν™μ©ν•΄λ³΄μ„Έμ”.
</Callout>

## ν„μ¬ μ•΅ν‹°λΉ„ν‹° κµμ²΄ν•κΈ°

λ‹¤μμΌλ΅ μ¤νƒμ— μƒλ΅μ΄ μ•΅ν‹°λΉ„ν‹°λ¥Ό μ¶”κ°€ν•μ§€ μ•κ³  ν„μ¬ μ•΅ν‹°λΉ„ν‹°λ¥Ό κµμ²΄ν•λ” λ°©λ²•μ— λ€ν•΄μ„ μ‚΄ν΄λ΄μ”. `stackflow.ts`μ—μ„ μƒμ„±ν–λ `useFlow()` ν›…μ `replace()` ν•¨μλ¥Ό ν†µν•΄ λ‹¤μκ³Ό κ°™μ΄ ν„μ¬ μ•΅ν‹°λΉ„ν‹°λ¥Ό κµμ²΄ν•  μ μμ–΄μ”.

```tsx
/**
 * MyActivity.tsx
 */
import { ActivityComponentType } from "@stackflow/react";
import { useFlow } from "./stackflow";

const MyActivity: ActivityComponentType = () => {
  const { replace } = useFlow();

  const onClick = () => {
    replace("Article", {
      title: "Hello, World!",
    });
  };

  return (
    <div>
      My Activity
      <button onClick={onClick}>Go to article page</button>
    </div>
  );
};

export default MyActivity;
```

`replace()`λ” `push()`μ™€ λΉ„μ·ν• APIλ¥Ό κ°–κ³  μμ–΄μ”. μ²«λ²μ§Έ νλΌλ―Έν„°λ΅ μ΄λ™ν•  μ•΅ν‹°λΉ„ν‹°μ μ΄λ¦„, λ‘λ²μ§Έ νλΌλ―Έν„°λ΅ μ΄λ™ν•  μ•΅ν‹°λΉ„ν‹°μ νλΌλ―Έν„°, μ„Έλ²μ§Έ νλΌλ―Έν„°λ΅ μ¶”κ°€ μµμ…μ„ λ°›μ•„μ”. μ„Έλ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ€ μ„ νƒμ μΌλ΅ λ„κΈ°μ§€ μ•μ„ μ μμ–΄μ”. (κΈ°λ³Έκ°’μ„ μ‚¬μ©ν•΄μ”)

```typescript
replace("μ•΅ν‹°λΉ„ν‹°_μ΄λ¦„", {
  /* μ•΅ν‹°λΉ„ν‹° νλΌλ―Έν„° */
});

// λλ”
replace(
  "μ•΅ν‹°λΉ„ν‹°_μ΄λ¦„",
  {
    /* μ•΅ν‹°λΉ„ν‹° νλΌλ―Έν„° */
  },
  {
    /* μ¶”κ°€ μµμ… */
  },
);
```

`replace()` ν•¨μμ μ„Έλ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ—λ” λ‹¤μκ³Ό κ°™μ€ κ°’μ΄ μμ–΄μ”.

| μµμ…λ…    | μ—­ν•                      | νƒ€μ…    | κΈ°λ³Έκ°’ |
| --------- | ------------------------ | ------- | ------ |
| `animate` | μ• λ‹λ©”μ΄μ…μ„ μΌκ±°λ‚ κΊΌμ” | Boolean | `true` |

## ν„μ¬ μ•΅ν‹°λΉ„ν‹° μ‚­μ ν•κΈ°

λ§μ§€λ§‰μΌλ΅ ν„μ¬ μ•΅ν‹°λΉ„ν‹°λ¥Ό μ‚­μ ν•κ³  μ΄μ „ μ•΅ν‹°λΉ„ν‹°λ΅ λμ•„κ°€λ” λ°©λ²•μ— λ€ν•΄μ„ μ‚΄ν΄λ΄μ”. `stackflow.ts`μ—μ„ μƒμ„±ν–λ `useFlow()` ν›…μ `pop()` ν•¨μλ¥Ό ν†µν•΄ λ‹¤μκ³Ό κ°™μ΄ ν„μ¬ μ•΅ν‹°λΉ„ν‹°λ¥Ό μ‚­μ ν•  μ μμ–΄μ”.

```tsx
/**
 * Article.tsx
 */
import { ActivityComponentType } from "@stackflow/react";
import { pop } from "./stackflow";

type ArticleProps = {
  title: string;
};
const Article: ActivityComponentType<ArticleProps> = ({ title }) => {
  const { pop } = useFlow();

  const onClick = () => {
    pop();
  };

  return (
    <div>
      <h1>{title}</h1>
      <button onClick={onClick}>back</button>
    </div>
  );
};

export default MyActivity;
```

`pop()`μ€ μ²«λ²μ§Έ νλΌλ―Έν„°λ΅ μ¶”κ°€ μµμ…μ„ λ°›μ•„μ”. μ²«λ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ€ μ„ νƒμ μΌλ΅ λ„κΈ°μ§€ μ•μ„ μ μμ–΄μ”. (κΈ°λ³Έκ°’μ„ μ‚¬μ©ν•΄μ”)

```typescript
pop();

// λλ”
pop({
  /* μ¶”κ°€ μµμ… */
});
```

`pop()` ν•¨μμ μ²«λ²μ§Έ νλΌλ―Έν„°μΈ μ¶”κ°€ μµμ…μ—λ” λ‹¤μκ³Ό κ°™μ€ κ°’μ΄ μμ–΄μ”.

| μµμ…λ…    | μ—­ν•                      | νƒ€μ…    | κΈ°λ³Έκ°’ |
| --------- | ------------------------ | ------- | ------ |
| `animate` | μ• λ‹λ©”μ΄μ…μ„ μΌκ±°λ‚ κΊΌμ” | Boolean | `true` |

## λΈλΌμ°μ € νμ¤ν† λ¦¬μ™€ μ‹±ν¬ν•κΈ°

**Stackflow**μ λ„¤λΉ„κ²μ΄μ… λ΅μ§μ€ κΈ°λ³Έμ μΌλ΅ λΈλΌμ°μ € νμ¤ν† λ¦¬μ— μμ΅΄ν•μ§€ μ•μ•„μ”. νμ¤ν† λ¦¬ APIκ°€ μ΅΄μ¬ν•μ§€ μ•λ” React Native, NativeScript λ“±μ ν™κ²½μ— λ€μ‘ν•κΈ° μ„ν•΄μ„μ—μ”. λ”°λΌμ„ λΈλΌμ°μ € νμ¤ν† λ¦¬λ¥Ό νƒν—μ— μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” μ¤νƒ μƒνƒλ¥Ό λΈλΌμ°μ € νμ¤ν† λ¦¬μ™€ λ™κΈ°ν™”ν•΄μ¤„ ν•„μ”κ°€ μμ–΄μ”. ν•΄λ‹Ή κΈ°λ¥μ€ `@stackflow/plugin-history-sync`κ°€ μ§€μ›ν•΄μ”.

λ‹¤μ λ…λ Ήμ–΄λ¥Ό ν†µν•΄ `plugin-history-sync`λ¥Ό μ„¤μΉν•΄μ”.

```bash
$ yarn add @stackflow/plugin-history-sync
```

μ„¤μΉκ°€ μ™„λ£λλ©΄ λ‹¤μκ³Ό κ°™μ΄ `stackflow()` ν•¨μμ `plugins` ν•„λ“μ— ν”λ¬κ·ΈμΈμ„ λ“±λ΅ν•΄μ”.

```typescript
/**
 * stackflow.ts
 */
import { stackflow } from "@stackflow/react";
import { renderPlugin } from "@stackflow/plugin-render";
import { uiPlugin } from "@stackflow/plugin-ui";
import { historySyncPlugin } from "@stackflow/plugin-history-sync";
import MyActivity from "./MyActivity";
import Article from "./Article";

const { Stack, useFlow } = stackflow({
  transitionDuration: 350,
  activities: {
    MyActivity,
    Article,
  },
  plugins: [
    renderPlugin(),
    uiPlugin(),
    historySyncPlugin({
      routes: {
        MyActivity: "/my-activity",
        Article: "/articles/:title",
      },
      fallbackActivity: () => "MyActivity",
    }),
  ],
  // historySyncPluginμ΄ ν•΄λ‹Ή μµμ…μ„ λ®μ–΄μ“°λ―€λ΅ initialActivityλ” λ” μ΄μƒ μ‘λ™ν•μ§€ μ•μ•„μ”.
  // initialActivity: () => "MyActivity",
});
```

`historySyncPlugin`μ€ `routes`μ™€ `fallbackActivity` λ‘ μµμ…μ„ λ°›μ•„μ”.

- `routes` - μ•΅ν‹°λΉ„ν‹°μ™€ URL ν…ν”λ¦Ώμ„ μ—°κ²°ν•΄μ”. μ•΅ν‹°λΉ„ν‹°μ νλΌλ―Έν„°λ¥Ό Path Parameterλ΅ ν‘ν„ν•  μ μμ–΄μ”. λ§μ•½ μ•΅ν‹°λΉ„ν‹°μ νλΌλ―Έν„°κ°€ ν•΄λ‹Ή URL ν…ν”λ¦Ώμ— μ—†λ‹¤λ©΄ μλ™μΌλ΅ Query Parameterλ΅ ν‘ν„λΌμ”.

- `fallbackActivity` - μ²« μ§„μ…μ‹μ— ν„μ¬ URLκ³Ό λ§¤ν•‘λλ” URLμ΄ μ—†λ” κ²½μ° μ–΄λ–¤ μ•΅ν‹°λΉ„ν‹°λ΅ λ³΄λ‚Όμ§€ κ²°μ •ν•΄μ”. μΌλ°μ μΌλ΅ 404 νμ΄μ§€λ¥Ό λ§λ“¤κ³  μ—¬κΈ°μ— ν• λ‹Ήν•΄μ”.

---

μ—¬κΈ°κΉμ§€ κΈ°λ³Έμ μΈ **Stackflow**μ ν™μ©λ²•μ„ μ•μ•„λ΄¤λ”λ°μ”. μ΄μ  ν™μ©ν•λ” κ²ƒμ„ λ„μ–΄μ„μ„ μ¤νƒ μƒνƒμ λ‚΄λ¶€ κµ¬μ΅°μ™€ μ΄λ¥Ό μ΄μ©ν• κµ¬μ²΄μ μΈ μ‘μ© λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³Όκ»μ”.
