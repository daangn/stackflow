import { Callout } from "nextra-theme-docs";

# API ë³€ê²½ì‚¬í•­

## Stackflow React Future

- ìƒˆ APIëŠ” `@stackflow/react/future` ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ìš”.

ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ì„¸ìš”.

```tsx showLineNumbers filename="Stack.tsx" copy
import { stackflow } from "@stackflow/react/future";
import HomeActivity from "../components/HomeActivity";
import MyProfileActivity from "../components/MyProfileActivity";

// ë§Œë“¤ì–´ì¤€ configë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤
import { config } from "./stackflow.config";

export const { Stack } = stackflow({
  config,
  
  // Configì—ì„œ ì„ ì–¸í•œ ì´ë¦„ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ì…í•´ìš”
  components: {
    HomeActivity,
    MyProfileActivity,
  },

  // ì´ì œ History Sync Pluginì— routesë¥¼ ë”°ë¡œ ì„ ì–¸í•  í•„ìš”ê°€ ì—†ì–´ìš”
  // ì•„ë˜ì™€ ê°™ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ë©´, stackflow.config.tsì— ë¹¨ê°„ì¤„ì´ ìƒê²¨ìš”
  plugins: [
    historySyncPlugin({
      config,
      fallbackActivity: () => "FeedActivity",
    }),
  ],
});
```

```tsx showLineNumbers filename="stackflow.config.ts" copy
import { defineConfig } from "@stackflow/config";

export const config = defineConfig({
  activities: [
    {
      name: "HomeActivity",
      
      // History Sync Pluginì—ì„œ ìš”êµ¬í•˜ëŠ” ì„¤ì •ê°’ì„ stackflow.configì— ê°™ì´ ì„ ì–¸í•  ìˆ˜ ìˆì–´ìš”
      route: "/",
    },
    {
      name: "MyProfileActivity",
      route: "/my-profile",
    },
    {
      name: "ArticleActivity",
      route: {
        path: "/articles/:articleId",
        decode(params) {
          return {
            articleId: Number(params.get("articleId")),
          };
        },
      },
    },
  ],
  transitionDuration: 270,
});
```

<Callout emoji="â“">
  **"ì™œ React ì»´í¬ë„ŒíŠ¸ëŠ” Configì— ê°™ì´ ì„ ì–¸í•˜ì§€ ì•Šë‚˜ìš”?"**

  Stackflow ConfigëŠ” í”„ë ˆì„ì›Œí¬ ì˜ì¡´ì„±ì´ ì—†ëŠ” ì •ì  ì •ë³´ë¥¼ ë‹´ëŠ” ê·¸ë¦‡ì´ ë˜ëŠ” ê²ƒì´ ì„¤ê³„ì˜ í•µì‹¬ì´ì—ìš”. Stackflow ConfigëŠ” React ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì´ ë¶€ë¶„ì„ ë¶„ë¦¬í•´ì„œ React ì˜ì¡´ì„±(ì»´í¬ë„ŒíŠ¸)ì€ `@stackflow/react` ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì— ì¶”ê°€í•˜ëŠ” ì‹ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆì–´ìš”.
</Callout>

## íƒ€ì… ì•ˆì •ì„±

ê¸°ì¡´ì—ëŠ” íƒ€ì…ì„ React ì»´í¬ë„ŒíŠ¸ì˜ Props íƒ€ì…ì„ í†µí•´ ì¶”ë¡ í–ˆì–´ìš”. ì´ì œ Configì—ì„œ ì¶”ë¡ í•˜ë„ë¡ ë³€ê²½ë¼ìš”.

Configì— ì•¡í‹°ë¹„í‹° íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ì¶”ê°€í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í•´ìš”.

```typescript
declare module "@stackflow/config" {
  interface Register {
    HomeActivity: {
      regionId: string;
      referrer?: string;
    }
  }
}
```

ì „ì—­ì— í•´ë‹¹ ì•¡í‹°ë¹„í‹°ì˜ íƒ€ì…ì´ ë“±ë¡ë˜ê³ , ì•„ë˜ì™€ ê°™ì´ ìœ í‹¸ íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.

```tsx showLineNumbers filename="HomeActivity.tsx" copy
import type { ActivityComponentType } from "@stackflow/react/future";

const HomeActivity: ActivityComponentType<"HomeActivity"> = ({ params }) => {
  params.regionId // string
  
  return (
    <div>...</div>
  )
}
```

ë˜í•œ í•´ë‹¹ ì„ ì–¸ì€ í•œ ì¥ì†Œì— ëª¨ì•„ë‘ì–´ë„ ë˜ê³ , ì•¡í‹°ë¹„í‹° íŒŒì¼ ë§ˆë‹¤ ë¶„ë¦¬í•´ë„ ë˜ë¯€ë¡œ(Co-location) ì›í•˜ì‹œëŠ”ëŒ€ë¡œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•´ìš”.

```typescript showLineNumbers filename="HomeActivity.tsx" copy
declare module "@stackflow/config" {
  interface Register {
    HomeActivity: {
      regionId: string;
      referrer?: string;
    }
  }
}
```
```typescript showLineNumbers filename="MyProfileActivity.tsx" copy
declare module "@stackflow/config" {
  interface Register {
    MyProfileActivity: {
      userId: string;
    }
  }
}
```

## `useFlow()`, `useStepFlow()`
ì´ì œ `flow()` ë“±ì˜ í•¨ìˆ˜ë¡œ `useFlow()`, `useStepFlow()` ë“±ì˜ í›…ì„ ìƒì„±í•  í•„ìš”ê°€ ì—†ì–´ìš”. ë°”ë¡œ importí•´ì„œ ì“¸ ìˆ˜ ìˆì–´ìš”.

```tsx showLineNumbers filename="HomeActivity.tsx" copy
import { useFlow, useStepFlow } from "@stackflow/react/future";

const { push } = useFlow();
const { pushStep } = useStepFlow<"HomeActivity">()

push("...", { ... }) // Typed
pushStep({ ... })    // Typed
```

íƒ€ì… ì•ˆì •ì„±ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì¥ë¼ìš”.

### íŒŒê´´ì  ë³€í™˜

`useStepFlow()`ì˜ í•¨ìˆ˜ ì´ë¦„ì´ ë°”ë€Œì—ˆì–´ìš”.

- ê¸°ì¡´: `stepPush()`, `stepReplace()`, `stepPop()`
- **ë³€ê²½: `pushStep()`, `replaceStep()`, `popStep()`**
- í•¨ìˆ˜ ì´ë¦„ì´ ë™ì‚¬ë¡œ ì‹œì‘í•˜ë„ë¡ ëª…ì„¸ë¥¼ ìˆ˜ì •ë˜ì—ˆì–´ìš”.
  
## `<Link />`
ë§ˆì°¬ê°€ì§€ë¡œ `createLinkComponent()` ë“±ì˜ í•¨ìˆ˜ë¡œ `<Link />` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ì–´ìš”. ë°”ë¡œ import í•´ì„œ ì“¸ ìˆ˜ ìˆì–´ìš”. ë˜í•œ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ Preload ë™ì‘ì„ ì‚­ì œí–ˆì–´ìš”.

```tsx showLineNumbers filename="MyComponent.tsx" copy
import { Link } from "@stackflow/link/future";

function MyComponent() {
  return (
    <div>
      {/* ... */}
      <Link activityName="..." activityParams={{ /* ... */ }} />
    </div>
  )
}
```

<Callout emoji="ğŸ’¡">
  ë·° í¬íŠ¸ì— `<Link />` ì»´í¬ë„ŒíŠ¸ê°€ ë“œëŸ¬ë‚¬ì„ë•Œ API í”„ë¦¬ë¡œë”©ì„ í•˜ëŠ” ë™ì‘ì€ ì„±ëŠ¥ í–¥ìƒì— í° ì´ì ì´ ìˆì§€ë§Œ ì„œë²„ ë¶€í•˜ë¥¼ í¬ê²Œ ëŠ˜ë¦¬ê¸° ë•Œë¬¸ì— ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ íŒŒì•…ë˜ì—ˆì–´ìš”. ë”°ë¼ì„œ ê¸°ë³¸ê°’ìœ¼ë¡œ ìˆë˜ ê¸°ì¡´ì˜ í”„ë¦¬ë¡œë”© ë™ì‘ì„ ì—†ì• ê³  ì¶”í›„ `<Link />` ì»´í¬ë„ŒíŠ¸ì˜ propsë¥¼ í†µí•´ í”„ë¦¬ë¡œë”© ì •ì±…ì„ ê°œë°œìê°€ ì„¸ë°€í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆë„ë¡ ì¶”í›„ ì¶”ê°€ í•  ì˜ˆì •ì´ì—ìš”.
</Callout>
